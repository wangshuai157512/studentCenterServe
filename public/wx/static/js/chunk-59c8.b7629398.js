(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-59c8"],{"8SHQ":function(t,e,a){"use strict";e.a={imgUrl:"https://xxzx.chinaedu.net"}},"RU/L":function(t,e,a){a("Rqdy");var i=a("WEpk").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},fRsc:function(t,e,a){"use strict";var i=a("m8tZ");a.n(i).a},i0lE:function(t,e,a){"use strict";a.r(e);var i=a("YEIV"),o=a.n(i),r=a("P2sY"),l=a.n(r),s=a("rVvO"),n=a("t3Un"),c=a("Dlz4"),m=a("8SHQ"),d={name:"classIndex",data:function(){return{classList:[],listLoading:!1,dialogFormVisible:!1,imgUrl:m.a.imgUrl,page:1,total:0,projectForm:{name:"",materialName:"",materialIntroduction:"",materialImg:"",materialTag:"",materialTypeTag:"",categoryId:null,videoUrl:"",isHot:0,bgcImg:"",videoImg:"",shareImg:"",weight:0},options:[{label:"是",type:1},{label:"否",type:0}],rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],categoryId:{required:!0,message:"请选择分类",trigger:"change"},videoUrl:{required:!1,message:"请输入视频地址",trigger:"blur"},isHot:{required:!0,message:"请选择是否热门",trigger:"change"},weight:[{required:!0,message:"请输入权重",trigger:"blur"},{required:!0,type:"number",message:"请输入数字"}]},categoryList:[],inputVisible:!1,inputValue:"",dynamicTags:[],dialogType:0,classId:null}},components:{Pagination:a("Mz3J").a},created:function(){this.getClassList(),this.getCategoryList()},methods:{showModel:function(t){this.dialogType=t,0===t&&(this.projectForm=l()({},this.projectForm,{name:"",materialName:"",materialIntroduction:"",materialImg:"",materialTag:"",materialTypeTag:"",categoryId:null,videoUrl:"",isHot:0,bgcImg:"",videoImg:"",shareImg:"",weight:0}),this.dynamicTags=[]),this.dialogFormVisible=!0},projectImg:function(t){var e=this,a=t.target.dataset.imgname,i=this.$refs[a].files[0];c.a.uploadImg(i).then(function(t){e.projectForm[a]=t.path,e.projectForm=l()({},e.projectForm,o()({},a,t.path))})},delImg:function(t){var e=t.target.dataset.imgname;this.projectForm=l()({},this.projectForm,o()({},e,""))},getClassList:function(){var t=this;this.listLoading=!0,Object(n.a)(s.a.getClassList+"?page="+this.page,"get").then(function(e){t.listLoading=!1,1===e.code?(t.classList=e.data,t.total=e.total):t.$message.error("获取失败")})},getCategoryList:function(){var t=this;this.listLoading=!0,Object(n.a)(s.a.getProjectList,"get").then(function(e){1===e.code?t.categoryList=e.data:t.$message.error("获取失败"),t.listLoading=!1}).catch(function(e){t.listLoading=!1})},del:function(t){var e=this,a=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=e.$loading();Object(n.a)({url:s.a.delClass,method:"post",data:{id:t}}).then(function(t){1===t.code?setTimeout(function(){e.$message.success("删除成功"),i.close(),a.getClassList()},1e3):e.$message.error("删除失败")})}).catch(function(){})},addProject:function(){var t=this,e=this;this.$refs.projectForm.validate(function(a){if(a){var i=t.$loading(),o=t.projectForm,r=o.name,c=o.categoryId,m=o.isHot,d=o.videoUrl,g=o.videoImg,u=o.bgcImg,p=o.shareImg,f=o.weight,h=o.materialImg,v=o.materialIntroduction,b=o.materialName,x=o.materialTag,_=o.materialTypeTag,I=t.dynamicTags;Object(n.a)({url:s.a.addClassItem,method:"post",data:{name:r,materialImg:h,materialIntroduction:v,materialName:b,materialTag:x,materialTypeTag:_,categoryId:c,isHot:m,weight:f,bgcImg:u,videoUrl:d,videoImg:g,shareImg:p,slogan:I}}).then(function(a){1===a.code?setTimeout(function(){e.dialogFormVisible=!1,i.close(),e.getClassList(),t.projectForm=l()({},t.projectForm,{name:"",materialName:"",materialIntroduction:"",materialImg:"",materialTag:"",materialTypeTag:"",categoryId:null,videoUrl:"",bgcImg:"",videoImg:"",shareImg:"",isHot:0,weight:0}),t.dynamicTags=[]},1e3):(i.close(),t.$message.error("添加失败"))}).catch(function(e){t.$message.error("添加失败")})}})},edit:function(t){var e=this;this.classId=t,Object(n.a)(s.a.getClassDetail+"?id="+t,"get").then(function(t){1===t.code&&(e.projectForm=l()({},e.projectForm,{name:t.data.name,materialName:t.data.materialName,materialIntroduction:t.data.materialIntroduction,materialImg:t.data.materialImg,materialTag:t.data.materialTag,materialTypeTag:t.data.materialTypeTag,categoryId:t.data.projectId,videoUrl:t.data.videoUrl,isHot:t.data.isHot,bgcImg:t.data.bgcImg,videoImg:t.data.videoImg,shareImg:t.data.shareImg,weight:t.data.weight}),e.dynamicTags=t.data.sloganList),e.showModel(1)})},editProject:function(){var t=this,e=this,a=this.projectForm,i=a.name,o=a.categoryId,r=a.isHot,c=a.videoUrl,m=a.videoImg,d=a.bgcImg,g=a.shareImg,u=a.weight,p=a.materialImg,f=a.materialIntroduction,h=a.materialName,v=a.materialTag,b=a.materialTypeTag,x=this.dynamicTags;this.$refs.projectForm.validate(function(a){if(a){var _=t.$loading();Object(n.a)({url:s.a.editClass,method:"post",data:{name:i,categoryId:o,isHot:r,videoUrl:c,weight:u,slogan:x,bgcImg:d,videoImg:m,shareImg:g,materialImg:p,materialIntroduction:f,materialName:h,materialTag:v,materialTypeTag:b,classId:t.classId}}).then(function(a){1===a.code&&setTimeout(function(){e.dialogFormVisible=!1,_.close(),e.getClassList(),t.projectForm=l()({},t.projectForm,{name:"",materialName:"",materialIntroduction:"",materialImg:"",materialTag:"",materialTypeTag:"",categoryId:null,videoUrl:"",isHot:0,videoImg:"",weight:0}),t.dynamicTags=[]},1e3)})}})},handleClose:function(t){this.dynamicTags.splice(t,1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&this.dynamicTags.push({name:t}),this.inputVisible=!1,this.inputValue=""}}},g=(a("fRsc"),a("KHd+")),u=Object(g.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"channel-content"},[a("div",{staticClass:"button-content"},[a("div",{staticClass:"add-content"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showModel(0)}}},[t._v("添加项目")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.classList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.videoUrl)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否热门"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.isHot?"是":"否")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.projectName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"项目",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"projectForm",attrs:{model:t.projectForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"项目","label-width":"120px",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.name,callback:function(e){t.$set(t.projectForm,"name",e)},expression:"projectForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属分类","label-width":"120px",prop:"categoryId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.projectForm.categoryId,callback:function(e){t.$set(t.projectForm,"categoryId",e)},expression:"projectForm.categoryId"}},t._l(t.categoryList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"视频地址","label-width":"120px",prop:"videoUrl"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.videoUrl,callback:function(e){t.$set(t.projectForm,"videoUrl",e)},expression:"projectForm.videoUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否热门","label-width":"120px",prop:"isHot"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.projectForm.isHot,callback:function(e){t.$set(t.projectForm,"isHot",e)},expression:"projectForm.isHot"}},t._l(t.options,function(t){return a("el-option",{key:t.type,attrs:{label:t.label,value:t.type}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"添加项目亮点","label-width":"120px"}},[a("div",{staticClass:"slogan"},[t._l(t.dynamicTags,function(e,i){return a("el-tag",{key:e.name,attrs:{closable:""},on:{close:function(e){t.handleClose(i)}}},[t._v(t._s(e.name))])}),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)]),t._v(" "),a("el-form-item",{attrs:{label:"资料包名称","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.materialName,callback:function(e){t.$set(t.projectForm,"materialName",e)},expression:"projectForm.materialName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"资料包简介","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.materialIntroduction,callback:function(e){t.$set(t.projectForm,"materialIntroduction",e)},expression:"projectForm.materialIntroduction"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"资料包标签","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.materialTag,callback:function(e){t.$set(t.projectForm,"materialTag",e)},expression:"projectForm.materialTag"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"资料包分类标签","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.materialTypeTag,callback:function(e){t.$set(t.projectForm,"materialTypeTag",e)},expression:"projectForm.materialTypeTag"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"背景图","label-width":"120px"}},[t.projectForm.bgcImg?a("div",{staticClass:"banner-img-wrap"},[a("img",{staticClass:"banner-img",attrs:{src:t.imgUrl+t.projectForm.bgcImg,alt:""}}),t._v(" "),a("span",{staticClass:"del-img"},[a("i",{staticClass:"el-icon-close",attrs:{"data-imgname":"bgcImg"},on:{click:function(e){t.delImg(e)}}})])]):a("button",{staticClass:"upload-btn"},[t._v("上传\n          "),a("input",{ref:"bgcImg",staticClass:"upload-input",attrs:{type:"file","data-imgname":"bgcImg"},on:{change:t.projectImg}})])]),t._v(" "),a("el-form-item",{attrs:{label:"视频封面","label-width":"120px"}},[t.projectForm.videoImg?a("div",{staticClass:"banner-img-wrap"},[a("img",{staticClass:"banner-img",attrs:{src:t.imgUrl+t.projectForm.videoImg,alt:""}}),t._v(" "),a("span",{staticClass:"del-img"},[a("i",{staticClass:"el-icon-close",attrs:{"data-imgname":"videoImg"},on:{click:function(e){t.delImg(e)}}})])]):a("button",{staticClass:"upload-btn"},[t._v("上传\n          "),a("input",{ref:"videoImg",staticClass:"upload-input",attrs:{type:"file","data-imgname":"videoImg"},on:{change:t.projectImg}})])]),t._v(" "),a("el-form-item",{attrs:{label:"分享封面","label-width":"120px"}},[t.projectForm.shareImg?a("div",{staticClass:"share-img-wrap"},[a("img",{staticClass:"share-img",attrs:{src:t.imgUrl+t.projectForm.shareImg,alt:""}}),t._v(" "),a("span",{staticClass:"del-img"},[a("i",{staticClass:"el-icon-close",attrs:{"data-imgname":"shareImg"},on:{click:function(e){t.delImg(e)}}})])]):a("button",{staticClass:"upload-btn"},[t._v("上传\n          "),a("input",{ref:"shareImg",staticClass:"upload-input",attrs:{type:"file","data-imgname":"shareImg"},on:{change:t.projectImg}})])]),t._v(" "),a("el-form-item",{attrs:{label:"资料包封面","label-width":"120px"}},[t.projectForm.materialImg?a("div",{staticClass:"share-img-wrap"},[a("img",{staticClass:"share-img",attrs:{src:t.imgUrl+t.projectForm.materialImg,alt:""}}),t._v(" "),a("span",{staticClass:"del-img"},[a("i",{staticClass:"el-icon-close",attrs:{"data-imgname":"materialImg"},on:{click:function(e){t.delImg(e)}}})])]):a("button",{staticClass:"upload-btn"},[t._v("上传\n          "),a("input",{ref:"materialImg",staticClass:"upload-input",attrs:{type:"file","data-imgname":"materialImg"},on:{change:t.projectImg}})])]),t._v(" "),a("el-form-item",{attrs:{label:"分类权重","label-width":"120px",prop:"weight"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectForm.weight,callback:function(e){t.$set(t.projectForm,"weight",t._n(e))},expression:"projectForm.weight"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),0===t.dialogType?a("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("添 加")]):1===t.dialogType?a("el-button",{attrs:{type:"primary"},on:{click:t.editProject}},[t._v("保 存")]):t._e()],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,limit:20},on:{"update:page":function(e){t.page=e},pagination:t.getClassList}})],1)},[],!1,null,"62d4063e",null);u.options.__file="classIndex.vue";e.default=u.exports},m8tZ:function(t,e,a){},rVvO:function(t,e,a){"use strict";e.a={getUserList:"/wx/api/xc_admin/getUserList",getFormUserList:"/wx/api/xc_admin/getFormUserList",delUser:"/wx/api/xc_admin/delUser",getShareList:"/wx/api/xc_user/getShareList",changeEnter:"/wx/api/xc_admin/isEnter",changeUserType:"/wx/api/xc_admin/changeUserType",searchUser:"/wx/api/xc_admin/searchTeacher",getSquadList:"/wx/api/xc_admin/getSquadUser",searchSquad:"/wx/api/xc_admin/searchSquad",getChannel:"/wx/api/xc_admin/getChannel",addChannel:"/wx/api/xc_admin/addChannel",delChannel:"/wx/api/xc_admin/delChannel",getProjectList:"/wx/api/xc_admin/getProjectList",addProject:"/wx/api/xc_admin/addProject",delProject:"/wx/api/xc_admin/delProject",getProjectDetail:"/wx/api/xc_admin/getProjectDetail",editProject:"/wx/api/xc_admin/editProject",getClassList:"/wx/api/xc_admin/getClassList",addClassItem:"/wx/api/xc_admin/addClassItem",delClass:"/wx/api/xc_admin/delClass",getClassSloganList:"/wx/api/xc_admin/getClassSloganList",getClassDetail:"/wx/api/xc_admin/getClassDetail",editClass:"/wx/api/xc_admin/editClass",getCourseTagList:"/wx/api/xc_admin/getCourseTagList",addCourseTag:"/wx/api/xc_admin/addCourseTag",delCourseTag:"/wx/api/xc_admin/delCourseTag",getCourseType:"/wx/api/xc_admin/getCourseType",addCourseType:"/wx/api/xc_admin/addCourseType",delCourseType:"/wx/api/xc_admin/delCourseType",getCourseSlogan:"/wx/api/xc_admin/getCourseSlogan",addCourseSlogan:"/wx/api/xc_admin/addCourseSlogan",delCourseSlogan:"/wx/api/xc_admin/delCourseSlogan",getCourseList:"/wx/api/xc_admin/getCourseList",getAllcategoryOrProject:"/wx/api/xc_admin/getAllcategoryOrProject",addCourse:"/wx/api/xc_admin/addCourse",delCourse:"/wx/api/xc_admin/delCourse",editCourse:"/wx/api/xc_admin/editCourse",getCourseDetail:"/wx/api/xc_admin/getCourseDetail",getMaterial:"/wx/api/xc_admin/getMaterial",addMaterial:"/wx/api/xc_admin/addMaterial",editMaterial:"/wx/api/xc_admin/editMaterial",delMaterial:"/wx/api/xc_admin/delMaterial"}}}]);
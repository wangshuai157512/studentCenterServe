(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5d60"],{"5fBL":function(a,e,t){"use strict";var i=t("Oj/Y");t.n(i).a},"Oj/Y":function(a,e,t){},YPQU:function(a,e,t){"use strict";t.r(e);var i=t("P2sY"),l=t.n(i),s=t("QbLZ"),r=t.n(s),d=t("t3Un"),o=t("rVvO"),n=t("L2JU"),c={name:"courseData",data:function(){return{tableData:[],tableCols:[{label:"ID",width:80,props:"id",align:"center"},{label:"资料名称",props:"materialName"},{label:"资料简介",props:"materialBrief"},{label:"所属班型",props:"name"},{label:"资料链接",props:"materialUrl",type:"a"},{slot:"opt"}],dialogOption:{showFooterBtn:!0,dialogVisible:!1,dialogTitle:"编辑"},addMaterialDialogOption:{dialogVisible:!1,dialogTitle:"添加"},classId:"",materialId:"",classList:[],addMaterialForm:{classId:null,materialName:null,materialUrl:null,brief:null},editMaterialForm:{classId:null,materialName:null,brief:null},isUpload:!1}},created:function(){console.log(this.uploadComplete),this.getDataList(),this.getClassList()},computed:r()({},Object(n.c)({state:function(a){return a}})),methods:{getClassList:function(){var a=this;Object(d.a)(o.a.getClassList,"get").then(function(e){1===e.code?a.classList=e.data:a.$message.error("获取失败")}).catch(function(e){a.$message.error("获取失败")})},getDataList:function(){var a=this,e=this.$loading();Object(d.a)(o.a.getMaterial,"get").then(function(t){1===t.code?a.tableData=t.data:a.$message.error("获取失败"),e.close()}).catch(function(e){a.$message.error("获取失败")})},edit:function(a,e){var t=this.tableData[e],i=t.materialName,s=t.classId,r=t.materialBrief;this.dialogOption=l()({},this.dialogOption,{dialogVisible:!0}),this.editMaterialForm=l()({},this.editMaterialForm,{classId:s,materialName:i,brief:r}),this.materialId=a},editMaterial:function(){var a=this,e=this.editMaterialForm;if(e.materialName&&e.materialName.replace(/(^\s*)|(\s*$)/g,"")){var t=this.$loading();Object(d.a)({url:o.a.editMaterial,method:"post",data:{id:this.materialId,name:e.materialName,brief:e.brief,classId:e.classId}}).then(function(e){1===e.code?setTimeout(function(){a.getDataList()},1e3):a.$message.error("修改失败"),a.$message.success("修改成功"),a.dialogOption=l()({},a.dialogOption,{dialogVisible:!1}),t.close()}).catch(function(e){a.$message.error("修改失败"),t.close()})}else this.$message.error("请输入资料名称")},delMaterial:function(a){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.a)({url:o.a.delMaterial,method:"post",data:{id:a}}).then(function(a){1===a.code?(e.$message.success("删除成功"),setTimeout(function(){e.getDataList()},500)):e.$message.error("删除失败")}).catch(function(a){e.$message.error("删除失败")})}).catch(function(a){})},addMaterial:function(){this.addMaterialDialogOption=l()({},this.addMaterialDialogOption,{dialogVisible:!0}),this.$store.commit("SET_UPLOAD_COMPLETE",0),this.isUpload=!1},changeMaterial:function(){var a=this;this.isUpload=!0;var e=this.$refs.material.files[0];this.$uploadFile(e).then(function(e){a.addMaterialForm=l()({},a.addMaterialForm,{materialUrl:e.path})}).catch(function(e){a.$message.error("上传失败")}),this.$refs.material.value=null},uploadMaterial:function(){var a=this,e=this.addMaterialForm,t=e.classId,i=e.materialName,s=e.materialUrl,r=e.brief;if(t)if(i&&i.replace(/(^\s*)|(\s*$)/g,""))if(r&&r.replace(/(^\s*)|(\s*$)/g,""))if(s){var n=this.$loading();Object(d.a)({url:o.a.addMaterial,method:"post",data:{name:i,materialUrl:s,brief:r,classId:t}}).then(function(e){1===e.code?(a.$message.success("上传成功"),setTimeout(function(){a.getDataList(),a.addMaterialDialogOption=l()({},a.addMaterialDialogOption,{dialogVisible:!1}),a.addMaterialForm=l()({},a.addMaterialForm,{classId:null,materialName:null,materialUrl:null}),a.$store.commit("SET_UPLOAD_COMPLETE",0)},1e3)):a.$message.error("上传失败"),n.close()}).catch(function(e){a.$message.error("上传失败"),a.$store.commit("SET_UPLOAD_COMPLETE",0),n.close(),a.addMaterialForm=l()({},a.addMaterialForm,{materialUrl:null})})}else this.$message.error("请上传资料");else this.$message.error("请输入简介");else this.$message.error("请输入名称");else this.$message.error("请选择班型")}}},m=(t("5fBL"),t("KHd+")),p=Object(m.a)(c,function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"app-container"},[t("header-group",[t("div",{staticClass:"query-wrap"},[t("div",{staticClass:"add-material"},[t("el-button",{attrs:{type:"primary"},on:{click:a.addMaterial}},[a._v("添加资料")])],1)])]),a._v(" "),t("hc-table",{attrs:{pagination:!1,"table-cols":a.tableCols,"table-data":a.tableData}},[t("el-table-column",{attrs:{slot:"opt",align:"center",prop:"created_at",label:"操作",width:"240"},slot:"opt",scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){a.edit(e.row.id,e.$index)}}},[a._v("编辑")]),a._v(" "),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){a.delMaterial(e.row.id)}}},[a._v("删除")])]}}])})],1),a._v(" "),t("div",{staticClass:"dialog"},[t("hc-dialog",{attrs:{"dialog-option":a.dialogOption},on:{handClick:a.editMaterial}},[t("div",[t("div",{staticClass:"course"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("选择班型")]),a._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.editMaterialForm.classId,callback:function(e){a.$set(a.editMaterialForm,"classId",e)},expression:"editMaterialForm.classId"}},a._l(a.classList,function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}))],1),a._v(" "),t("div",{staticClass:"input__"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("资料名称")]),a._v(" "),t("div",{staticClass:"input-wrap"},[t("el-input",{attrs:{placeholder:"请输入资料名称"},model:{value:a.editMaterialForm.materialName,callback:function(e){a.$set(a.editMaterialForm,"materialName",e)},expression:"editMaterialForm.materialName"}})],1)]),a._v(" "),t("div",{staticClass:"input__"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("资料简介")]),a._v(" "),t("div",{staticClass:"input-wrap"},[t("el-input",{attrs:{placeholder:"请输入资料名称"},model:{value:a.editMaterialForm.brief,callback:function(e){a.$set(a.editMaterialForm,"brief",e)},expression:"editMaterialForm.brief"}})],1)])])])],1),a._v(" "),t("div",{staticClass:"add-material-dialog"},[t("hc-dialog",{attrs:{"dialog-option":a.addMaterialDialogOption},on:{handClick:a.uploadMaterial}},[t("div",[t("div",{staticClass:"course"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("选择班型")]),a._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.addMaterialForm.classId,callback:function(e){a.$set(a.addMaterialForm,"classId",e)},expression:"addMaterialForm.classId"}},a._l(a.classList,function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}))],1),a._v(" "),t("div",{staticClass:"input__"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("资料名称")]),a._v(" "),t("div",{staticClass:"input-wrap"},[t("el-input",{attrs:{placeholder:"请输入资料名称"},model:{value:a.addMaterialForm.materialName,callback:function(e){a.$set(a.addMaterialForm,"materialName",e)},expression:"addMaterialForm.materialName"}})],1)]),a._v(" "),t("div",{staticClass:"input__"},[t("label",{staticStyle:{"margin-right":"10px"}},[a._v("资料简介")]),a._v(" "),t("div",{staticClass:"input-wrap"},[t("el-input",{attrs:{placeholder:"请输入资料名称"},model:{value:a.addMaterialForm.brief,callback:function(e){a.$set(a.addMaterialForm,"brief",e)},expression:"addMaterialForm.brief"}})],1)]),a._v(" "),t("div",{staticClass:"add"},[a.isUpload?t("el-progress",{attrs:{percentage:a.state.globalData.uploadComplete,status:100===a.state.globalData.uploadComplete?"success":""}}):a._e(),a._v(" "),t("button",{staticClass:"upload-btn"},[a._v("上传资料\n            "),t("input",{ref:"material",staticClass:"upload-input",attrs:{type:"file"},on:{change:a.changeMaterial}})])],1)])])],1)],1)},[],!1,null,null,null);p.options.__file="courseData.vue";e.default=p.exports},rVvO:function(a,e,t){"use strict";e.a={getUserList:"/wx/api/xc_admin/getUserList",getFormUserList:"/wx/api/xc_admin/getFormUserList",delUser:"/wx/api/xc_admin/delUser",getShareList:"/wx/api/xc_user/getShareList",changeEnter:"/wx/api/xc_admin/isEnter",changeUserType:"/wx/api/xc_admin/changeUserType",searchUser:"/wx/api/xc_admin/searchTeacher",getSquadList:"/wx/api/xc_admin/getSquadUser",searchSquad:"/wx/api/xc_admin/searchSquad",getChannel:"/wx/api/xc_admin/getChannel",addChannel:"/wx/api/xc_admin/addChannel",delChannel:"/wx/api/xc_admin/delChannel",getProjectList:"/wx/api/xc_admin/getProjectList",addProject:"/wx/api/xc_admin/addProject",delProject:"/wx/api/xc_admin/delProject",getProjectDetail:"/wx/api/xc_admin/getProjectDetail",editProject:"/wx/api/xc_admin/editProject",getClassList:"/wx/api/xc_admin/getClassList",addClassItem:"/wx/api/xc_admin/addClassItem",delClass:"/wx/api/xc_admin/delClass",getClassSloganList:"/wx/api/xc_admin/getClassSloganList",getClassDetail:"/wx/api/xc_admin/getClassDetail",editClass:"/wx/api/xc_admin/editClass",getCourseTagList:"/wx/api/xc_admin/getCourseTagList",addCourseTag:"/wx/api/xc_admin/addCourseTag",delCourseTag:"/wx/api/xc_admin/delCourseTag",getCourseType:"/wx/api/xc_admin/getCourseType",addCourseType:"/wx/api/xc_admin/addCourseType",delCourseType:"/wx/api/xc_admin/delCourseType",getCourseSlogan:"/wx/api/xc_admin/getCourseSlogan",addCourseSlogan:"/wx/api/xc_admin/addCourseSlogan",delCourseSlogan:"/wx/api/xc_admin/delCourseSlogan",getCourseList:"/wx/api/xc_admin/getCourseList",getAllcategoryOrProject:"/wx/api/xc_admin/getAllcategoryOrProject",addCourse:"/wx/api/xc_admin/addCourse",delCourse:"/wx/api/xc_admin/delCourse",editCourse:"/wx/api/xc_admin/editCourse",getCourseDetail:"/wx/api/xc_admin/getCourseDetail",getMaterial:"/wx/api/xc_admin/getMaterial",addMaterial:"/wx/api/xc_admin/addMaterial",editMaterial:"/wx/api/xc_admin/editMaterial",delMaterial:"/wx/api/xc_admin/delMaterial"}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-735f"],{"9Ssi":function(t,e,a){"use strict";a.r(e);var n=a("t3Un"),i=a("Mz3J"),l=a("WPss"),s={data:function(){return{list:[],exportList:[],total:0,listLoading:!1,page:1,search:"",start_time:"",end_time:"",startTime:null,endTime:null,channelVal:"",channelList:[{channel_name:"全部",id:""}]}},components:{Pagination:i.a},created:function(){this.fetchData(),this.getChannelList()},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.listLoading=!0,Object(n.a)(l.a.getFormUserList+"?page="+(e.isExport?null:this.page)+"&startTime="+this.startTime+"&endTime="+this.endTime+"&channel="+this.channelVal).then(function(a){1===a.code?e.isExport?(t.exportList=a.data,e.callback()):(t.list=a.data,t.total=a.total):t.$message.error("获取失败"),t.listLoading=!1})},getChannelList:function(){var t=this;Object(n.a)(l.a.getChannel,"get").then(function(e){t.listLoading=!1,1===e.code?t.channelList=t.channelList.concat(e.data):t.$message.error("获取失败")})},del:function(t){var e=this;this.$confirm("确认要删除该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.a)({url:l.a.delUser,method:"post",data:{id:t}}).then(function(t){1===t.code&&e.fetchData()})}).catch(function(){})},getUser:function(){this.startTime=this.start_time?this.dateTime(this.start_time):null,this.endTime=this.end_time?this.dateTime(this.end_time):null,this.fetchData()},exportData:function(){this.fetchData({isExport:!0,callback:this.exportCallback})},exportCallback:function(){var t=this;Promise.all([a.e("chunk-2fa2"),a.e("chunk-0ab9")]).then(function(){var e=a("S/jZ").export_json_to_excel,n=t.exportList;e(["姓名","手机号","备注","渠道"],t.formatJson(["name","phone","marks","channel_name"],n),"表单用户"),t.downloadLoading=!1}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},dateTime:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();i=i<10?"0"+i:i;var l=e.getHours();l=l<10?"0"+l:l;var s=e.getMinutes();s=s<10?"0"+s:s;var o=e.getSeconds();return o=o<10?"0"+o:o,a+"-"+n+"-"+i}}},o=(a("uojj"),a("KHd+")),r=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"header-wrap"},[a("div",{staticClass:"time-content"},[a("div",{staticClass:"start-time"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),t._v(" "),a("div",{staticClass:"end-time"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),t._v(" "),a("div",{staticClass:"channel-category"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.channelVal,callback:function(e){t.channelVal=e},expression:"channelVal"}},t._l(t.channelList,function(t){return a("el-option",{key:t.id,attrs:{label:t.channel_name,value:t.id}})}))],1)]),t._v(" "),a("el-button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:t.getUser}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list.filter(function(e){return!t.search||e.user.includes(t.search)}),"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.phone)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.channel_name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.create_time)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.marks)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,"limit.sync":"20"},on:{"update:page":function(e){t.page=e},pagination:t.fetchData}})],1)},[],!1,null,"22bf5c0c",null);r.options.__file="formUser.vue";e.default=r.exports},WPss:function(t,e,a){"use strict";var n=a("Aeqt"),i={getUserList:n.a.BaseUrl+"/api/youxuepei_admin/getUserList",getFormUserList:n.a.BaseUrl+"/api/youxuepei_admin/getFormUserList",delUser:n.a.BaseUrl+"/api/youxuepei_admin/delUser",getChannel:n.a.BaseUrl+"/api/youxuepei_admin/getChannel",addChannel:n.a.BaseUrl+"/api/youxuepei_admin/addChannel",delChannel:n.a.BaseUrl+"/api/youxuepei_admin/delChannel"};e.a=i},uojj:function(t,e,a){"use strict";var n=a("zMU9");a.n(n).a},zMU9:function(t,e,a){}}]);
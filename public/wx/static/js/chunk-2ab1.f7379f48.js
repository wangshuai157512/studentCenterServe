(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2ab1"],{"0tVQ":function(e,t,o){o("FlQf"),o("VJsP"),e.exports=o("WEpk").Array.from},"8SHQ":function(e,t,o){"use strict";t.a={imgUrl:"https://xxzx.chinaedu.net"}},GQYB:function(e,t,o){"use strict";o.r(t);var a=o("P2sY"),r=o.n(a),s=o("m1cH"),i=o.n(s),n=o("rVvO"),l=o("t3Un"),c=(o("Dlz4"),o("8SHQ")),u={name:"course",data:function(){return{courseList:[],listLoading:!1,dialogFormVisible:!1,imgUrl:c.a.imgUrl,page:1,total:0,projectList:[],courseType:[],courseTag:[],courseSlogan:[],projectForm:{name:"",classId:[],courseType:"",courseTag:[],courseSlogan:[],hour:"",price:"",weight:0},rules:{name:[{required:!0,message:"请输入项目名称"}],weight:[{required:!0,message:"请输入权重"},{type:"number",message:"请输入数字"}],classId:[{required:!0,message:"请选择项目"},{type:"array",message:"请选择项目"}],price:[{required:!0,message:"请输入价格"},{type:"number",message:"请输入数字"}]},diglogType:0,courseId:null,courseDetail:null}},components:{Pagination:o("Mz3J").a},created:function(){this.getCourseList(),this.getProjectList(),this.getCourseType(),this.getCourseTag(),this.getCourseSlogan()},methods:{showModel:function(e){var t=this;this.dialogFormVisible=!0,setTimeout(function(){t.$refs.projectForm.resetFields()}),this.diglogType=e},getCourseList:function(){var e=this;this.listLoading=!0,Object(l.a)(n.a.getCourseList+"?page="+this.page,"get").then(function(t){e.listLoading=!1,1===t.code?(e.courseList=t.data,e.total=t.total):e.$message.error("获取失败")})},getProjectList:function(){var e=this;Object(l.a)(""+n.a.getAllcategoryOrProject,"get").then(function(t){1===t.code?e.projectList=t.data:e.$message.error("获取失败")})},getCourseType:function(){var e=this;Object(l.a)(n.a.getCourseType,"get").then(function(t){if(1===t.code){var o=[{id:0,name:"无"}].concat(i()(t.data));e.courseType=o}})},getCourseTag:function(){var e=this;Object(l.a)(n.a.getCourseTagList,"get").then(function(t){1===t.code&&(e.courseTag=t.data)})},getCourseSlogan:function(){var e=this;Object(l.a)(n.a.getCourseSlogan,"get").then(function(t){1===t.code&&(e.courseSlogan=t.data)})},editCourse:function(e){this.showModel(1),this.courseId=e,this.getCourseDetail()},getCourseDetail:function(){var e=this,t=this.courseId;Object(l.a)(n.a.getCourseDetail+"?id="+t,"get").then(function(t){if(1===t.code){for(var o=t.data,a=[],s=[],i=[o.parents.projectId,o.parents.classId],n=0;n<o.courseTag.length;n++)a.push(o.courseTag[n].id);for(var l=0;l<o.courseSlogan.length;l++)s.push(o.courseSlogan[l].id);e.projectForm=r()({},e.projectForm,{name:o.name,courseType:o.courseType?o.courseType.id:0,courseTag:a,courseSlogan:s,classId:i,hour:o.classHour,price:o.price,weight:o.weight})}})},edit:function(){var e=this,t=this.courseId,o=this;this.$refs.projectForm.validate(function(a){if(a)if(o.projectForm.classId.length>1){var r=o.projectForm.classId[1],s=o.projectForm.classId[0],i=e.$loading(),c=e.projectForm,u=c.name,d=c.courseType,p=c.courseTag,g=c.courseSlogan,m=c.price,f=c.hour,h=c.weight;Object(l.a)({url:n.a.editCourse,method:"post",data:{name:u,courseType:d,courseTag:p,courseSlogan:g,price:m,classId:r,hour:f,id:t,projectId:s,weight:h}}).then(function(t){1===t.code?setTimeout(function(){o.dialogFormVisible=!1,i.close(),e.$refs.projectForm.resetFields(),o.getCourseList()},1e3):(i.close(),e.$message.error("修改失败"))}).catch(function(t){e.$message.error("修改失败")})}else e.$message.error("请选择项目")})},del:function(e){var t=this,o=this;this.$confirm("此操作将永久删除该课程, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.$loading();Object(l.a)({url:n.a.delCourse,method:"post",data:{id:e}}).then(function(e){1===e.code?setTimeout(function(){t.$message.success("删除成功"),a.close(),o.getCourseList()},1e3):t.$message.error("删除失败")})}).catch(function(){})},addProject:function(){var e=this,t=this;this.$refs.projectForm.validate(function(o){if(console.log(t.projectForm),o)if(t.projectForm.classId.length>1){var a=t.projectForm.classId[1],r=e.$loading(),s=e.projectForm,i=s.name,c=s.courseType,u=s.courseTag,d=s.courseSlogan,p=s.price,g=s.hour,m=s.weight;Object(l.a)({url:n.a.addCourse,method:"post",data:{name:i,courseType:c,courseTag:u,courseSlogan:d,price:p,classId:a,hour:g,weight:m}}).then(function(o){1===o.code?setTimeout(function(){t.dialogFormVisible=!1,r.close(),e.$refs.projectForm.resetFields(),t.getCourseList()},1e3):(r.close(),e.$message.error("添加失败"))}).catch(function(t){e.$message.error("添加失败")})}else e.$message.error("请选择项目")})}}},d=(o("aePB"),o("KHd+")),p=Object(d.a)(u,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"channel-content"},[o("div",{staticClass:"button-content"},[o("div",{staticClass:"add-content"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showModel(0)}}},[e._v("添加班型")])],1)]),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.courseList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"课时"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.classHour)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.price)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"所属项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.projectName)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"所属分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.className)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){e.editCourse(t.row.id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:"班型",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"projectForm",attrs:{model:e.projectForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"所属项目","label-width":"120px",prop:"classId"}},[o("el-cascader",{attrs:{"expand-trigger":"hover",options:e.projectList,value:"[]",props:{value:"id",label:"name",children:"children"}},model:{value:e.projectForm.classId,callback:function(t){e.$set(e.projectForm,"classId",t)},expression:"projectForm.classId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"班型名称","label-width":"120px",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"价格","label-width":"120px",prop:"price"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.projectForm.price,callback:function(t){e.$set(e.projectForm,"price",e._n(t))},expression:"projectForm.price"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"学时","label-width":"120px",prop:"hour"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.projectForm.hour,callback:function(t){e.$set(e.projectForm,"hour",e._n(t))},expression:"projectForm.hour"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"课程类型","label-width":"120px",prop:"courseType"}},[o("el-select",{attrs:{placeholder:"课程类型"},model:{value:e.projectForm.courseType,callback:function(t){e.$set(e.projectForm,"courseType",t)},expression:"projectForm.courseType"}},e._l(e.courseType,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"课程标签","label-width":"120px",prop:"courseTag"}},[o("el-select",{attrs:{multiple:"",placeholder:"课程标签"},model:{value:e.projectForm.courseTag,callback:function(t){e.$set(e.projectForm,"courseTag",t)},expression:"projectForm.courseTag"}},e._l(e.courseTag,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"课程亮点","label-width":"120px",prop:"courseSlogan"}},[o("div",{staticClass:"course-slogan"},[o("el-select",{attrs:{multiple:"",placeholder:"课程亮点"},model:{value:e.projectForm.courseSlogan,callback:function(t){e.$set(e.projectForm,"courseSlogan",t)},expression:"projectForm.courseSlogan"}},e._l(e.courseSlogan,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),o("el-form-item",{attrs:{label:"分类权重","label-width":"120px",prop:"weight"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.projectForm.weight,callback:function(t){e.$set(e.projectForm,"weight",e._n(t))},expression:"projectForm.weight"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),0===e.diglogType?o("el-button",{attrs:{type:"primary"},on:{click:e.addProject}},[e._v("添 加")]):1===e.diglogType?o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.edit()}}},[e._v("保 存")]):e._e()],1)],1),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.page,limit:20},on:{"update:page":function(t){e.page=t},pagination:e.getCourseList}})],1)},[],!1,null,null,null);p.options.__file="course.vue";t.default=p.exports},IP1Z:function(e,t,o){"use strict";var a=o("2faE"),r=o("rr1i");e.exports=function(e,t,o){t in e?a.f(e,t,r(0,o)):e[t]=o}},VJsP:function(e,t,o){"use strict";var a=o("2GTP"),r=o("Y7ZC"),s=o("JB68"),i=o("sNwI"),n=o("NwJ3"),l=o("tEej"),c=o("IP1Z"),u=o("fNZA");r(r.S+r.F*!o("TuGD")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,r,d,p=s(e),g="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,h=void 0!==f,x=0,_=u(p);if(h&&(f=a(f,m>2?arguments[2]:void 0,2)),void 0==_||g==Array&&n(_))for(o=new g(t=l(p.length));t>x;x++)c(o,x,h?f(p[x],x):p[x]);else for(d=_.call(p),o=new g;!(r=d.next()).done;x++)c(o,x,h?i(d,f,[r.value,x],!0):r.value);return o.length=x,o}})},aePB:function(e,t,o){"use strict";var a=o("q3wX");o.n(a).a},m1cH:function(e,t,o){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(o("rfXi"));t.default=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return(0,a.default)(e)}},q3wX:function(e,t,o){},rVvO:function(e,t,o){"use strict";t.a={getUserList:"/wx/api/xc_admin/getUserList",getFormUserList:"/wx/api/xc_admin/getFormUserList",delUser:"/wx/api/xc_admin/delUser",getShareList:"/wx/api/xc_user/getShareList",changeEnter:"/wx/api/xc_admin/isEnter",changeUserType:"/wx/api/xc_admin/changeUserType",searchUser:"/wx/api/xc_admin/searchTeacher",getSquadList:"/wx/api/xc_admin/getSquadUser",searchSquad:"/wx/api/xc_admin/searchSquad",getChannel:"/wx/api/xc_admin/getChannel",addChannel:"/wx/api/xc_admin/addChannel",delChannel:"/wx/api/xc_admin/delChannel",getProjectList:"/wx/api/xc_admin/getProjectList",addProject:"/wx/api/xc_admin/addProject",delProject:"/wx/api/xc_admin/delProject",getProjectDetail:"/wx/api/xc_admin/getProjectDetail",editProject:"/wx/api/xc_admin/editProject",getClassList:"/wx/api/xc_admin/getClassList",addClassItem:"/wx/api/xc_admin/addClassItem",delClass:"/wx/api/xc_admin/delClass",getClassSloganList:"/wx/api/xc_admin/getClassSloganList",getClassDetail:"/wx/api/xc_admin/getClassDetail",editClass:"/wx/api/xc_admin/editClass",getCourseTagList:"/wx/api/xc_admin/getCourseTagList",addCourseTag:"/wx/api/xc_admin/addCourseTag",delCourseTag:"/wx/api/xc_admin/delCourseTag",getCourseType:"/wx/api/xc_admin/getCourseType",addCourseType:"/wx/api/xc_admin/addCourseType",delCourseType:"/wx/api/xc_admin/delCourseType",getCourseSlogan:"/wx/api/xc_admin/getCourseSlogan",addCourseSlogan:"/wx/api/xc_admin/addCourseSlogan",delCourseSlogan:"/wx/api/xc_admin/delCourseSlogan",getCourseList:"/wx/api/xc_admin/getCourseList",getAllcategoryOrProject:"/wx/api/xc_admin/getAllcategoryOrProject",addCourse:"/wx/api/xc_admin/addCourse",delCourse:"/wx/api/xc_admin/delCourse",editCourse:"/wx/api/xc_admin/editCourse",getCourseDetail:"/wx/api/xc_admin/getCourseDetail",getMaterial:"/wx/api/xc_admin/getMaterial",addMaterial:"/wx/api/xc_admin/addMaterial",editMaterial:"/wx/api/xc_admin/editMaterial",delMaterial:"/wx/api/xc_admin/delMaterial"}},rfXi:function(e,t,o){e.exports={default:o("0tVQ"),__esModule:!0}}}]);
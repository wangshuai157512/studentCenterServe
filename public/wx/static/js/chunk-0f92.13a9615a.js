(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0f92"],{"4Y5t":function(e,a,t){"use strict";var i=t("EQ0L");t.n(i).a},EQ0L:function(e,a,t){},IyT8:function(e,a,t){"use strict";t.r(a);var i=t("P2sY"),s=t.n(i),r=t("t3Un"),n=t("rVvO"),l={name:"xc_user",data:function(){return{list:[],page:1,query:{phone:"",teacherName:"",isEnter:"",userType:""},rolesType:0,tableCols:[{label:"ID",width:80,props:"id",align:"center"},{label:"微信昵称",props:"nickname"},{label:"头像",props:"avatarUrl",type:"image"},{label:"手机号",props:"phone"},{label:"上级手机号",props:"firstUserPhone"},{label:"老师姓名",props:"newTeacherName"},{label:"老师城市",props:"newTeacherCity"},{label:"用户分类",props:"userType",type:"tag",tagList:[{type:"info",name:"游客"},{type:"",name:"客户"},{type:"success",name:"销售"}]},{label:"是否录入公服",props:"isEnter",type:"switch",activeValue:1,inactiveValue:0},{label:"操作",slot:"opt"}],options:[{label:"游客",value:0},{label:"客户",value:1},{label:"销售",value:2}],userStatusOptions:[{label:"游客",value:0},{label:"客户",value:1},{label:"销售",value:2},{label:"全部",value:""}],isEntry:!0,editUserId:null,paginationOption:{total:0,page:1,limit:20},dialogOption:{dialogVisible:!1},isEnterOptions:[{label:"是",value:1},{label:"否",value:0},{label:"全部",value:""}]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.page&&(this.page=a.page);var t=this.$loading();Object(r.a)(n.a.getUserList+"?phone="+this.query.phone+"&teacherName="+this.query.teacherName+"&isEnter="+this.query.isEnter+"&userType="+this.query.userType+"&page="+this.page).then(function(a){if(1===a.code){var i=a.data;i.forEach(function(e){2===e.userType?(e.newTeacherName=e.teacherName,e.newTeacherCity=e.teacherCity):(e.newTeacherName=e.firstUserName,e.newTeacherCity=e.firstUserCity)}),e.list=i,e.paginationOption=s()({},e.paginationOption,{total:a.total})}else e.$message.error("获取失败");t.close()}).catch(function(a){e.$message.error("获取失败"),t.close()})},edit:function(e,a){this.editUserId=e;var t=this.list[a].userType;this.rolesType=t,this.dialogOption=s()({},this.dialogOption,{dialogVisible:!0})},lookShare:function(e){this.$router.push({path:"shareUser?id="+e})},editRoles:function(){var e=this,a=this.$loading();Object(r.a)({url:n.a.changeUserType,method:"post",data:{userId:this.editUserId,userType:this.rolesType}}).then(function(t){1===t.code?(e.$message.success("修改成功"),e.dialogOption=s()({},e.dialogOption,{dialogVisible:!1}),e.fetchData()):e.$message.error("修改失败"),a.close()}).catch(function(t){e.$message.error("修改失败"),a.close()})},exportExl:function(e){var a=this;Object(r.a)(n.a.getShareList+"?id="+e).then(function(e){1===e.code?a.$exportExcel({tHeader:["姓名","电话"],tKey:["nickname","phone"],exportList:e.data,excelName:"分享列表"}):a.$message.error("获取失败")})},exportExlData:function(){var e=this.list;e.forEach(function(e){switch(e.newIsEnter=1===e.isEnter?"是":"否",e.userType){case 0:e.newUserType="游客";break;case 1:e.newUserType="客户";break;case 2:e.newUserType="销售";break;default:e.newUserType="未知"}}),this.$exportExcel({tHeader:["微信昵称","电话","老师姓名","上级姓名","城市","用户标签","是否录入公服"],tKey:["nickname","phone","teacherName","newTeacherName","teacherCity","newUserType","newIsEnter"],exportList:e,excelName:"用户"})},changeEnter:function(e){var a=this,t=e.id,i=e.index,s=this.$loading(),l=this.list[i].isEnter;Object(r.a)({url:n.a.changeEnter,method:"post",data:{userId:t,isEnter:l}}).then(function(e){1===e.code?a.$message.success("修改成功"):a.$message.error("修改失败"),s.close()}).catch(function(e){a.$message.error("修改失败"),s.close()})},getUser:function(){this.page=1,this.paginationOption=s()({},this.paginationOption,{page:1}),this.fetchData()}}},o=(t("4Y5t"),t("KHd+")),c=Object(o.a)(l,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("header-group",[t("div",{staticClass:"query-wrap"},[t("div",{staticClass:"user-phone query-input__ query-item"},[t("label",[e._v("手机号:")]),e._v(" "),t("div",[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.query.phone,callback:function(a){e.$set(e.query,"phone",a)},expression:"query.phone"}})],1)]),e._v(" "),t("div",{staticClass:"teacher-name query-input__ query-item"},[t("label",[e._v("老师姓名:")]),e._v(" "),t("div",[t("el-input",{attrs:{placeholder:"请输入老师姓名"},model:{value:e.query.teacherName,callback:function(a){e.$set(e.query,"teacherName",a)},expression:"query.teacherName"}})],1)]),e._v(" "),t("div",{staticClass:"query-input__ query-item"},[t("label",[e._v("是否录入公服:")]),e._v(" "),t("el-select",{attrs:{placeholder:"是否录入公服"},model:{value:e.query.isEnter,callback:function(a){e.$set(e.query,"isEnter",a)},expression:"query.isEnter"}},e._l(e.isEnterOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"query-input__ query-item"},[t("label",[e._v("用户状态:")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.query.userType,callback:function(a){e.$set(e.query,"userType",a)},expression:"query.userType"}},e._l(e.userStatusOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"query-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getUser}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:e.exportExlData}},[e._v("导出")])],1)])]),e._v(" "),t("hc-table",{attrs:{pagination:"","table-cols":e.tableCols,"table-data":e.list,"pagination-option":e.paginationOption},on:{handChangeSwitch:e.changeEnter,handPaginationData:e.fetchData}},[t("el-table-column",{attrs:{slot:"opt",align:"center",prop:"created_at",label:"操作",width:"340"},slot:"opt",scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.lookShare(a.row.id)}}},[e._v("我的邀请")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.edit(a.row.id,a.$index)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.exportExl(a.row.id)}}},[e._v("导出")])]}}])})],1),e._v(" "),t("hc-dialog",{attrs:{"dialog-option":e.dialogOption},on:{handClick:e.editRoles}},[t("div",{staticClass:"roles"},[t("label",[e._v("标记角色")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.rolesType,callback:function(a){e.rolesType=a},expression:"rolesType"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])],1)},[],!1,null,"64cf13e5",null);c.options.__file="user.vue";a.default=c.exports},rVvO:function(e,a,t){"use strict";a.a={getUserList:"/wx/api/xc_admin/getUserList",getFormUserList:"/wx/api/xc_admin/getFormUserList",delUser:"/wx/api/xc_admin/delUser",getShareList:"/wx/api/xc_user/getShareList",changeEnter:"/wx/api/xc_admin/isEnter",changeUserType:"/wx/api/xc_admin/changeUserType",searchUser:"/wx/api/xc_admin/searchTeacher",getSquadList:"/wx/api/xc_admin/getSquadUser",searchSquad:"/wx/api/xc_admin/searchSquad",getChannel:"/wx/api/xc_admin/getChannel",addChannel:"/wx/api/xc_admin/addChannel",delChannel:"/wx/api/xc_admin/delChannel",getProjectList:"/wx/api/xc_admin/getProjectList",addProject:"/wx/api/xc_admin/addProject",delProject:"/wx/api/xc_admin/delProject",getProjectDetail:"/wx/api/xc_admin/getProjectDetail",editProject:"/wx/api/xc_admin/editProject",getClassList:"/wx/api/xc_admin/getClassList",addClassItem:"/wx/api/xc_admin/addClassItem",delClass:"/wx/api/xc_admin/delClass",getClassSloganList:"/wx/api/xc_admin/getClassSloganList",getClassDetail:"/wx/api/xc_admin/getClassDetail",editClass:"/wx/api/xc_admin/editClass",getCourseTagList:"/wx/api/xc_admin/getCourseTagList",addCourseTag:"/wx/api/xc_admin/addCourseTag",delCourseTag:"/wx/api/xc_admin/delCourseTag",getCourseType:"/wx/api/xc_admin/getCourseType",addCourseType:"/wx/api/xc_admin/addCourseType",delCourseType:"/wx/api/xc_admin/delCourseType",getCourseSlogan:"/wx/api/xc_admin/getCourseSlogan",addCourseSlogan:"/wx/api/xc_admin/addCourseSlogan",delCourseSlogan:"/wx/api/xc_admin/delCourseSlogan",getCourseList:"/wx/api/xc_admin/getCourseList",getAllcategoryOrProject:"/wx/api/xc_admin/getAllcategoryOrProject",addCourse:"/wx/api/xc_admin/addCourse",delCourse:"/wx/api/xc_admin/delCourse",editCourse:"/wx/api/xc_admin/editCourse",getCourseDetail:"/wx/api/xc_admin/getCourseDetail",getMaterial:"/wx/api/xc_admin/getMaterial",addMaterial:"/wx/api/xc_admin/addMaterial",editMaterial:"/wx/api/xc_admin/editMaterial",delMaterial:"/wx/api/xc_admin/delMaterial"}}}]);